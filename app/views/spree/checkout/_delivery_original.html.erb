<%#
  NOTE: The code below is an exact duplication of `spree_core/views/checkout/_delivery.html.erbÂ´
        We overwrote the original so we retain access to it by cloning it here.
        Feel free to update the code below according to the original if needed!
%>

<fieldset id='shipping_method' data-hook>
  <legend><%= t(:shipping_method) %></legend>
  <div class="inner" data-hook="shipping_method_inner">
    <div id="methods">
      <p class="field radios">
        <% @order.rate_hash.each do |shipping_method| %>
        <% next if @order.digital_shipping_method && shipping_method[:id] == @order.digital_shipping_method[:id] %>
          <label>
            <%= radio_button(:order, :shipping_method_id, shipping_method[:id]) %>
            <% if Spree::Config[:shipment_inc_vat] %>
              <%= shipping_method[:name] %> <%= format_price (1 + Spree::TaxRate.default) * shipping_method[:cost] %>
            <% else %>
            <%= shipping_method[:name] %> <%= number_to_currency shipping_method[:cost] %>
            <% end %>
          </label>
        <% end %>
      </p>
    </div>
    <% if Spree::Config[:shipping_instructions] && @order.rate_hash.present? %>
      <p id="minstrs" data-hook>
        <%= form.label :special_instructions, t(:shipping_instructions) %><br />
        <%= form.text_area :special_instructions, :cols => 40, :rows => 7 %>
      </p>
    <% end %>
  </div>
</fieldset>

<br />

<div class="form-buttons" data-hook="buttons">
  <%= submit_tag t(:save_and_continue), :class => 'continue button primary' %>
</div>
